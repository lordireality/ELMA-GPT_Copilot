const _0x469fb8=_0x1c56;function _0x1c56(_0xa6bc41,_0x26b009){const _0x56fb01=_0x56fb();return _0x1c56=function(_0x1c5628,_0x4e5871){_0x1c5628=_0x1c5628-0xc0;let _0x23ba89=_0x56fb01[_0x1c5628];return _0x23ba89;},_0x1c56(_0xa6bc41,_0x26b009);}(function(_0x412254,_0x34023d){const _0x4fe9a1=_0x1c56,_0x59f9e0=_0x412254();while(!![]){try{const _0x10a8da=-parseInt(_0x4fe9a1(0xd9))/0x1+-parseInt(_0x4fe9a1(0x113))/0x2*(-parseInt(_0x4fe9a1(0xe5))/0x3)+-parseInt(_0x4fe9a1(0xca))/0x4*(parseInt(_0x4fe9a1(0xcb))/0x5)+-parseInt(_0x4fe9a1(0x11a))/0x6*(parseInt(_0x4fe9a1(0xe4))/0x7)+-parseInt(_0x4fe9a1(0xf8))/0x8*(parseInt(_0x4fe9a1(0x103))/0x9)+-parseInt(_0x4fe9a1(0xee))/0xa*(-parseInt(_0x4fe9a1(0xef))/0xb)+parseInt(_0x4fe9a1(0xdb))/0xc;if(_0x10a8da===_0x34023d)break;else _0x59f9e0['push'](_0x59f9e0['shift']());}catch(_0x4994ef){_0x59f9e0['push'](_0x59f9e0['shift']());}}}(_0x56fb,0xbef33),window[_0x469fb8(0x102)]=!![]);function _0x56fb(){const _0x2b9c70=['10feZtgM','301367Oyaets','source','textContent','gpt-response','replace','getManifest','toLowerCase','system','Производим\x20инъекцию\x20кнопки\x20','101480RPUmNd','MonacoEditor\x20найден\x20','onload','TEXT_NODE','json','gpt-panel','document','parentElement','chat-message\x20user','length','__ELMA_GPT_SUPRESSLOGS','90HVdNyY','stringify','Ищем\x20MonacoEditor\x20','index','</code></pre>','div','Страница\x20не\x20WebDesigner,\x20остановка\x20','ELMA_GPT_LOGGER','cloneNode','filter','content.js\x20подключен.\x20Создаем\x20подписку\x20на\x20изменения\x20','Ошибка\x20получения\x20ответа','childNodes','readOnly','chat-message\x20assistant','getElementById','48702fHMdPG','scrollTo','get','src','body','\x0a\x20\x20\x20\x20<div\x20id=\x22gpt-response\x22></div>\x0a\x20\x20\x20\x20<div\x20class=\x22gpt-input-area\x22>\x0a\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22gpt-question\x22\x20placeholder=\x22Что\x20делает\x20этот\x20код?\x20Как\x20мне\x20исправить\x20ошибку?\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22gpt-send\x22>Отправить</button>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20','POST','5346QEdSjy','pathname','GET_CURRENT_CODE','<br>','tagName','span','Ты\x20специалист\x20LowCode\x20разработки\x20ELMA4.\x20Пользуйся\x20справкой\x20https://www.elma-bpm.ru/KB/index','addEventListener','Диспозимся\x20ребятки\x20','scrollHeight','gptMsgTmp','elmaOpenaiApiKey','runtime','includes','</div>','className','head','scrollTop','nodeType','message','GPT_CODE_RESPONSE','загружаем\x20inject.js','data','appendChild','GPT_MODEL_READY','content','11668BtXnOL','2010vCCzNs','log','ELEMENT_NODE','hidden','script','sync','<pre><code>','&lt;','createElement','storage','version','trim','postMessage','removeEventListener','86119TNwMmx','__ELMA_GPT_MONACOMODEL','29801112nVZIDG','&gt;','gpt-send','.monaco-editor','PRE','remove','type','value','innerHTML','6139LOIPNY','54tzeqXY','split','application/json','user','smooth','inject.js\x20загружен\x20','elmaOpenaiModel','nodeValue','showGPTPannel'];_0x56fb=function(){return _0x2b9c70;};return _0x56fb();}function sendLog(_0x1f6878){const _0x51b6a6=_0x469fb8;if(window[_0x51b6a6(0x102)]==!![])return;var _0x4ecb11='';switch(_0x1f6878){case 0x1:_0x4ecb11=_0x51b6a6(0x109);break;case 0x2:_0x4ecb11=_0x51b6a6(0x10d);break;case 0x3:_0x4ecb11=_0x51b6a6(0x122);break;case 0x4:_0x4ecb11=_0x51b6a6(0xea);break;case 0x5:_0x4ecb11=_0x51b6a6(0x105);break;case 0x6:_0x4ecb11=_0x51b6a6(0xf9);break;case 0x7:_0x4ecb11=_0x51b6a6(0xf7);break;case 0x7:_0x4ecb11=_0x51b6a6(0xc5);break;default:_0x4ecb11='Ошибка\x20логирования!';break;}console[_0x51b6a6(0xcc)]('[ELMA-GPT\x20Copilot]'+_0x4ecb11);}function scrollToBottom(_0x9af7a3){const _0x1cc5f7=_0x469fb8;if(_0x9af7a3==null)return;_0x9af7a3[_0x1cc5f7(0x114)]({'top':_0x9af7a3[_0x1cc5f7(0x123)],'behavior':_0x1cc5f7(0xe9)});}function typeHtmlWithMarkdown(_0x524c24,_0x110269,_0x38940b=0xa){const _0x37af3f=_0x469fb8;_0x524c24['innerHTML']='';const _0x3c284b=document[_0x37af3f(0xd3)](_0x37af3f(0x108));_0x3c284b[_0x37af3f(0xe3)]=_0x110269;const _0x1694d8=Array['from'](_0x3c284b[_0x37af3f(0x10f)]);let _0x474637=0x0;function _0x4c5ebf(){const _0x153a8b=_0x37af3f;if(_0x474637>=_0x1694d8[_0x153a8b(0x101)])return;const _0x196059=_0x1694d8[_0x474637++];if(_0x196059[_0x153a8b(0xc2)]===Node[_0x153a8b(0xcd)]&&_0x196059[_0x153a8b(0x11e)]===_0x153a8b(0xdf))_0x524c24['appendChild'](_0x196059[_0x153a8b(0x10b)](!![])),scrollToBottom(_0x524c24?.[_0x153a8b(0xff)]?.[_0x153a8b(0xff)]??null),_0x4c5ebf();else{if(_0x196059[_0x153a8b(0xc2)]===Node[_0x153a8b(0xfb)]){const _0x11ca9f=document[_0x153a8b(0xd3)](_0x153a8b(0x11f));_0x524c24['appendChild'](_0x11ca9f);const _0x100392=_0x196059[_0x153a8b(0xec)]||'';let _0xb6d567=0x0;function _0x21422b(){const _0x4c5807=_0x153a8b;_0xb6d567<_0x100392[_0x4c5807(0x101)]?(_0x11ca9f[_0x4c5807(0xf1)]+=_0x100392[_0xb6d567++],scrollToBottom(_0x524c24?.[_0x4c5807(0xff)]?.['parentElement']??null),setTimeout(_0x21422b,_0x38940b)):_0x4c5ebf();}_0x21422b();}else{if(_0x196059['nodeType']===Node['ELEMENT_NODE']){const _0x988073=document['createElement'](_0x196059['tagName'][_0x153a8b(0xf5)]());_0x524c24['appendChild'](_0x988073);const _0x32c641=_0x196059['textContent']||'',_0x2a814e=_0x32c641[_0x153a8b(0xe6)](/(\n|<br\s*\/?>)/g)[_0x153a8b(0x10c)](_0x313be0=>_0x313be0[_0x153a8b(0xd6)]()[_0x153a8b(0x101)]>0x0);let _0x20ddcd=0x0;function _0x5842f7(){const _0x1b0220=_0x153a8b;if(_0x20ddcd>=_0x2a814e[_0x1b0220(0x101)]){_0x4c5ebf();return;}const _0x2d88ea=_0x2a814e[_0x20ddcd++],_0x23357=document[_0x1b0220(0xd3)]('span');_0x988073[_0x1b0220(0xc7)](_0x23357);let _0xb585b8=0x0;function _0x20401c(){const _0x56d5c2=_0x1b0220;_0xb585b8<_0x2d88ea[_0x56d5c2(0x101)]?(_0x23357[_0x56d5c2(0xf1)]+=_0x2d88ea[_0xb585b8++],scrollToBottom(_0x524c24?.[_0x56d5c2(0xff)]?.[_0x56d5c2(0xff)]??null),setTimeout(_0x20401c,_0x38940b)):(_0x988073['appendChild'](document[_0x56d5c2(0xd3)]('br')),_0x5842f7());}_0x20401c();}_0x5842f7();}else _0x4c5ebf();}}}_0x4c5ebf();}function formatMarkdownBlocks(_0x284e75){const _0x482190=_0x469fb8;return _0x284e75[_0x482190(0xf3)](/```([\s\S]*?)```/g,(_0x16b1c8,_0x18fce7)=>{const _0x39d34a=_0x482190;return _0x39d34a(0xd1)+_0x18fce7[_0x39d34a(0xf3)](/</g,_0x39d34a(0xd2))[_0x39d34a(0xf3)](/>/g,_0x39d34a(0xdc))+_0x39d34a(0x107);})[_0x482190(0xf3)](/\n/g,'<br>');}window[_0x469fb8(0x121)](_0x469fb8(0xc3),_0x4b181f=>{const _0x4fb1be=_0x469fb8;if(_0x4b181f[_0x4fb1be(0xc6)][_0x4fb1be(0xe1)]==_0x4fb1be(0x10a)){sendLog(_0x4b181f[_0x4fb1be(0xc6)][_0x4fb1be(0x106)]);return;}if(_0x4b181f[_0x4fb1be(0xf0)]!==window||_0x4b181f[_0x4fb1be(0xc6)][_0x4fb1be(0xe1)]!==_0x4fb1be(0xc8))return;const _0x43cc08=document[_0x4fb1be(0xd3)](_0x4fb1be(0x108));_0x43cc08[_0x4fb1be(0x129)]=_0x4fb1be(0xfd),_0x43cc08['id']='gpt-panel',_0x43cc08[_0x4fb1be(0xce)]=document['getElementById'](_0x4fb1be(0xed))!=null,_0x43cc08[_0x4fb1be(0xe3)]=_0x4fb1be(0x118),document[_0x4fb1be(0x117)][_0x4fb1be(0xc7)](_0x43cc08),document[_0x4fb1be(0x112)](_0x4fb1be(0xdd))['addEventListener']('click',async()=>{const _0x326e92=_0x4fb1be,_0x404c23=document[_0x326e92(0x112)]('gpt-question'),_0x246ab9=document[_0x326e92(0x112)](_0x326e92(0xf2)),_0x258a60=_0x404c23[_0x326e92(0xe2)][_0x326e92(0xd6)]();if(!_0x258a60)return;const _0x4b8b29=document[_0x326e92(0xd3)]('div');_0x4b8b29['className']=_0x326e92(0x100),_0x4b8b29['innerHTML']='<div\x20class=\x22bubble\x20user-bubble\x22>'+_0x258a60[_0x326e92(0xf3)](/\n/g,_0x326e92(0x11d))+_0x326e92(0x128),_0x246ab9[_0x326e92(0xc7)](_0x4b8b29),_0x404c23['value']='',_0x404c23['readOnly']=!![];const _0x1aae4c=document[_0x326e92(0xd3)]('div');_0x1aae4c['className']=_0x326e92(0x111),_0x1aae4c[_0x326e92(0xe3)]='<div\x20class=\x22bubble\x20assistant-bubble\x22><i>Думаю\x20над\x20запросом...</i></div>',_0x1aae4c['id']=_0x326e92(0x124),_0x246ab9[_0x326e92(0xc7)](_0x1aae4c),_0x246ab9[_0x326e92(0xc1)]=_0x246ab9[_0x326e92(0x123)],chrome[_0x326e92(0xd4)][_0x326e92(0xd0)][_0x326e92(0x115)](['elmaOpenaiApiKey',_0x326e92(0xeb)],async _0x59bfdc=>{const _0x21f211=_0x326e92,_0x18996f=_0x59bfdc[_0x21f211(0x125)],_0x2c624e=_0x59bfdc[_0x21f211(0xeb)]||'gpt-4o-mini';if(!_0x18996f){alert('API\x20ключ\x20не\x20указан\x20в\x20параметрах\x20расширения!');return;}window['addEventListener'](_0x21f211(0xc3),async function _0x188a36(_0x168731){const _0xc81fda=_0x21f211;if(_0x168731['source']!==window||_0x168731[_0xc81fda(0xc6)][_0xc81fda(0xe1)]!==_0xc81fda(0xc4))return;window[_0xc81fda(0xd8)](_0xc81fda(0xc3),_0x188a36);const _0x5b8938=_0x258a60+'\x0a\x0a'+_0x168731[_0xc81fda(0xc6)][_0xc81fda(0xc9)],_0x31325a=await fetch('https://api.openai.com/v1/chat/completions',{'method':_0xc81fda(0x119),'headers':{'Authorization':'Bearer\x20'+_0x18996f,'Content-Type':_0xc81fda(0xe7)},'body':JSON[_0xc81fda(0x104)]({'model':_0x2c624e,'messages':[{'role':_0xc81fda(0xf6),'content':_0xc81fda(0x120)},{'role':_0xc81fda(0xe8),'content':_0x5b8938}]})}),_0x22da70=await _0x31325a[_0xc81fda(0xfc)](),_0x54eccf=_0x22da70['choices']?.[0x0]?.['message']?.['content']||_0xc81fda(0x10e);this[_0xc81fda(0xfe)][_0xc81fda(0x112)](_0xc81fda(0x124))['remove']();const _0x79248a=document[_0xc81fda(0xd3)]('div');_0x79248a[_0xc81fda(0x129)]='chat-message\x20assistant';const _0x3966b3=document[_0xc81fda(0xd3)]('div');_0x3966b3[_0xc81fda(0x129)]='bubble\x20assistant-bubble',_0x79248a[_0xc81fda(0xc7)](_0x3966b3),_0x246ab9[_0xc81fda(0xc7)](_0x79248a);const _0x34e39f=formatMarkdownBlocks(_0x54eccf);typeHtmlWithMarkdown(_0x3966b3,_0x34e39f,0xa),_0x246ab9['scrollTop']=_0x246ab9[_0xc81fda(0x123)],_0x404c23[_0xc81fda(0x110)]=![];}),window[_0x21f211(0xd7)]({'type':_0x21f211(0x11c)},'*');});});}),((()=>{const _0x48c9bb=_0x469fb8;if(!location[_0x48c9bb(0x11b)][_0x48c9bb(0x127)]('/WebDesigner')){sendLog(0x1);return;}console['log']('[ELMA-GPT\x20Copilot]ELMA-GPT\x20Copilot\x20v.'+chrome['runtime'][_0x48c9bb(0xf4)]()[_0x48c9bb(0xd5)]),console[_0x48c9bb(0xcc)]('[ELMA-GPT\x20Copilot]src:\x20https://github.com/lordireality/ELMA-GPT_Copilot'),sendLog(0x2);let _0x49de4c=![];const _0x26aa30=new MutationObserver(()=>{const _0x5cdc76=_0x48c9bb,_0x133b2d=!!document['querySelector'](_0x5cdc76(0xde)),_0xaaf38b=!!document[_0x5cdc76(0x112)](_0x5cdc76(0xfd));if(_0x133b2d&&!_0x49de4c){_0x49de4c=!![],sendLog(0x8);if(_0xaaf38b)document[_0x5cdc76(0x112)](_0x5cdc76(0xfd))[_0x5cdc76(0xe0)]();const _0x25e23c=document['createElement'](_0x5cdc76(0xcf));_0x25e23c[_0x5cdc76(0x116)]=chrome[_0x5cdc76(0x126)]['getURL']('inject.js'),_0x25e23c[_0x5cdc76(0xfa)]=function(){this['remove']();},(document[_0x5cdc76(0xc0)]||document['documentElement'])[_0x5cdc76(0xc7)](_0x25e23c);}if(!_0x133b2d&&_0x49de4c){_0x49de4c=![],sendLog(0x3);const _0x2e75a8=document['getElementById']('gpt-panel');if(_0x2e75a8)_0x2e75a8[_0x5cdc76(0xe0)]();window[_0x5cdc76(0xda)]=null;}});_0x26aa30['observe'](document['body'],{'childList':!![],'subtree':!![]});})());