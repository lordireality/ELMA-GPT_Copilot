function _0x9efa(_0x579fd9,_0x40f3cf){const _0x4e479b=_0x4e47();return _0x9efa=function(_0x9efad9,_0x7a50a){_0x9efad9=_0x9efad9-0x19d;let _0x43bc50=_0x4e479b[_0x9efad9];return _0x43bc50;},_0x9efa(_0x579fd9,_0x40f3cf);}const _0x4389d7=_0x9efa;(function(_0x576c1a,_0x24a7a4){const _0x3fc1e3=_0x9efa,_0x50468b=_0x576c1a();while(!![]){try{const _0x24a070=-parseInt(_0x3fc1e3(0x20d))/0x1*(-parseInt(_0x3fc1e3(0x1fd))/0x2)+parseInt(_0x3fc1e3(0x1dd))/0x3+-parseInt(_0x3fc1e3(0x207))/0x4+-parseInt(_0x3fc1e3(0x200))/0x5+parseInt(_0x3fc1e3(0x1d8))/0x6*(parseInt(_0x3fc1e3(0x1fc))/0x7)+parseInt(_0x3fc1e3(0x1b8))/0x8*(-parseInt(_0x3fc1e3(0x19f))/0x9)+parseInt(_0x3fc1e3(0x1ab))/0xa;if(_0x24a070===_0x24a7a4)break;else _0x50468b['push'](_0x50468b['shift']());}catch(_0x366fed){_0x50468b['push'](_0x50468b['shift']());}}}(_0x4e47,0x70b9a));function _0x4e47(){const _0x1d1273=['addEventListener','1843431jLdAgU','split','scrollTo','Диспозимся\x20ребятки\x20','textContent','querySelector','includes','replace','MonacoEditor\x20найден\x20','runtime','<br>','trim','Производим\x20инъекцию\x20кнопки\x20','length','elmaOpenaiMonacoTheme','sync','content.js\x20подключен.\x20Создаем\x20подписку\x20на\x20изменения\x20','chat-message\x20assistant','storage','gptMsgTmp','data','[ELMA-GPT\x20Copilot]','Ошибка\x20применения\x20темы\x20monaco','.monaco-editor','/WebDesigner','scrollTop','TEXT_NODE','nodeType','chat-message\x20user','POST','postMessage','1267xCzQiZ','122wWmFhe','div','appendChild','2639025NPAwbu','innerHTML','bubble\x20assistant-bubble','get','remove','removeEventListener','choices','901236IJCIST','hidden','__ELMA_GPT_SUPRESSLOGS','Bearer\x20','body','application/json','1992fyunVy','scrollHeight','toLowerCase','162kGtrti','Загружаем\x20inject.js','ELMA_GPT_LOGGER','message','source','document','Ищем\x20MonacoEditor\x20','ELMA_GPT_SET_THEME','nodeValue','Ошибка\x20получения\x20ответа','json','Ошибка\x20логирования!','8470680EKsUDE','__ELMA_GPT_MONACOMODEL','className','https://api.openai.com/v1/','gpt-response','user','ELEMENT_NODE','chat/completions','childNodes','gpt-question','getManifest','Ты\x20специалист\x20LowCode\x20разработки\x20ELMA4.\x20Пользуйся\x20справкой\x20https://www.elma-bpm.ru/KB/index','readOnly','223424BdNkeB','log','createElement','tagName','</code></pre>','Регистрация\x20кастомной\x20темы','value','getElementById','gpt-4o-mini','observe','&lt;','parentElement','version','stringify','gpt-panel','PRE','pathname','inject.js\x20загружен\x20','&gt;','[ELMA-GPT\x20Copilot]ELMA-GPT\x20Copilot\x20v.','from','filter','elmaOpenaiEndpoint','index','cloneNode','elmaOpenaiSystemPromt','type','elmaOpenaiModel','API\x20ключ\x20не\x20указан\x20в\x20параметрах\x20расширения!','GPT_CODE_RESPONSE','span','script','4458ewjkoP','content','elmaOpenaiApiKey','GET_CURRENT_CODE'];_0x4e47=function(){return _0x1d1273;};return _0x4e47();}function formatMarkdownBlocks(_0x2e6581){const _0x7151a5=_0x9efa;return _0x2e6581[_0x7151a5(0x1e4)](/```([\s\S]*?)```/g,(_0x453f03,_0x2ddb0f)=>{const _0x359db9=_0x7151a5;return'<pre><code>'+_0x2ddb0f[_0x359db9(0x1e4)](/</g,_0x359db9(0x1c2))[_0x359db9(0x1e4)](/>/g,_0x359db9(0x1ca))+_0x359db9(0x1bc);})[_0x7151a5(0x1e4)](/\n/g,_0x7151a5(0x1e7));}window[_0x4389d7(0x1dc)](_0x4389d7(0x1a2),_0x79bcf4=>{const _0x390233=_0x4389d7;if(_0x79bcf4[_0x390233(0x1f1)][_0x390233(0x1d2)]==_0x390233(0x1a1)){sendLog(_0x79bcf4['data'][_0x390233(0x1cf)]);return;}if(_0x79bcf4['source']!==window||_0x79bcf4[_0x390233(0x1f1)][_0x390233(0x1d2)]!=='GPT_MODEL_READY')return;const _0x169098=document[_0x390233(0x1ba)](_0x390233(0x1fe));_0x169098[_0x390233(0x1ad)]=_0x390233(0x1c6),_0x169098['id']=_0x390233(0x1c6),_0x169098[_0x390233(0x208)]=document[_0x390233(0x1bf)]('showGPTPannel')!=null,_0x169098[_0x390233(0x201)]='\x0a\x20\x20\x20\x20<div\x20id=\x22gpt-response\x22></div>\x0a\x20\x20\x20\x20<div\x20class=\x22gpt-input-area\x22>\x0a\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22gpt-question\x22\x20placeholder=\x22Что\x20делает\x20этот\x20код?\x20Как\x20мне\x20исправить\x20ошибку?\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22gpt-send\x22>Отправить</button>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20',document[_0x390233(0x20b)][_0x390233(0x1ff)](_0x169098),document[_0x390233(0x1bf)]('gpt-send')[_0x390233(0x1dc)]('click',async()=>{const _0x34350b=_0x390233,_0x293ab9=document[_0x34350b(0x1bf)](_0x34350b(0x1b4)),_0xf8260a=document[_0x34350b(0x1bf)](_0x34350b(0x1af)),_0x2b11db=_0x293ab9['value'][_0x34350b(0x1e8)]();if(!_0x2b11db)return;const _0x544c4f=document[_0x34350b(0x1ba)](_0x34350b(0x1fe));_0x544c4f[_0x34350b(0x1ad)]=_0x34350b(0x1f9),_0x544c4f[_0x34350b(0x201)]='<div\x20class=\x22bubble\x20user-bubble\x22>'+_0x2b11db['replace'](/\n/g,'<br>')+'</div>',_0xf8260a[_0x34350b(0x1ff)](_0x544c4f),_0x293ab9[_0x34350b(0x1be)]='',_0x293ab9[_0x34350b(0x1b7)]=!![];const _0x365a17=document[_0x34350b(0x1ba)](_0x34350b(0x1fe));_0x365a17[_0x34350b(0x1ad)]='chat-message\x20assistant',_0x365a17[_0x34350b(0x201)]='<div\x20class=\x22bubble\x20assistant-bubble\x22><i>Думаю\x20над\x20запросом...</i></div>',_0x365a17['id']='gptMsgTmp',_0xf8260a[_0x34350b(0x1ff)](_0x365a17),_0xf8260a[_0x34350b(0x1f6)]=_0xf8260a['scrollHeight'],chrome[_0x34350b(0x1ef)]['sync'][_0x34350b(0x203)](['elmaOpenaiApiKey','elmaOpenaiModel','elmaOpenaiEndpoint',_0x34350b(0x1d1)],async _0x546486=>{const _0xec6e6e=_0x34350b,_0x5580c7=_0x546486[_0xec6e6e(0x1ce)]||_0xec6e6e(0x1ae),_0x13bea6=_0x546486[_0xec6e6e(0x1d1)]||_0xec6e6e(0x1b6),_0x16fdaf=_0x546486[_0xec6e6e(0x1da)],_0x446fad=_0x546486[_0xec6e6e(0x1d3)]||_0xec6e6e(0x1c0);if(!_0x16fdaf){alert(_0xec6e6e(0x1d4));return;}window[_0xec6e6e(0x1dc)](_0xec6e6e(0x1a2),async function _0x2b4eaf(_0x218f54){const _0x6034c=_0xec6e6e;if(_0x218f54[_0x6034c(0x1a3)]!==window||_0x218f54[_0x6034c(0x1f1)][_0x6034c(0x1d2)]!==_0x6034c(0x1d5))return;window[_0x6034c(0x205)](_0x6034c(0x1a2),_0x2b4eaf);const _0x10ef4f=_0x2b11db+'\x0a\x0a'+_0x218f54[_0x6034c(0x1f1)][_0x6034c(0x1d9)],_0x5085bf=await fetch(_0x5580c7+_0x6034c(0x1b2),{'method':_0x6034c(0x1fa),'headers':{'Authorization':_0x6034c(0x20a)+_0x16fdaf,'Content-Type':_0x6034c(0x20c)},'body':JSON[_0x6034c(0x1c5)]({'model':_0x446fad,'messages':[{'role':'system','content':_0x13bea6},{'role':_0x6034c(0x1b0),'content':_0x10ef4f}]})}),_0x1abf25=await _0x5085bf[_0x6034c(0x1a9)](),_0x360c00=_0x1abf25[_0x6034c(0x206)]?.[0x0]?.[_0x6034c(0x1a2)]?.[_0x6034c(0x1d9)]||_0x6034c(0x1a8);this[_0x6034c(0x1a4)][_0x6034c(0x1bf)](_0x6034c(0x1f0))['remove']();const _0x52537c=document['createElement'](_0x6034c(0x1fe));_0x52537c[_0x6034c(0x1ad)]=_0x6034c(0x1ee);const _0x3d4d73=document[_0x6034c(0x1ba)](_0x6034c(0x1fe));_0x3d4d73[_0x6034c(0x1ad)]=_0x6034c(0x202),_0x52537c[_0x6034c(0x1ff)](_0x3d4d73),_0xf8260a[_0x6034c(0x1ff)](_0x52537c);const _0x56987d=formatMarkdownBlocks(_0x360c00);typeHtmlWithMarkdown(_0x3d4d73,_0x56987d,0xa),_0xf8260a[_0x6034c(0x1f6)]=_0xf8260a['scrollHeight'],_0x293ab9[_0x6034c(0x1b7)]=![];}),window[_0xec6e6e(0x1fb)]({'type':_0xec6e6e(0x1db)},'*');});});}),((()=>{const _0x250a7e=_0x4389d7;if(!location[_0x250a7e(0x1c8)][_0x250a7e(0x1e3)](_0x250a7e(0x1f5))){sendLog(0x1);return;}console[_0x250a7e(0x1b9)](_0x250a7e(0x1cb)+chrome[_0x250a7e(0x1e6)][_0x250a7e(0x1b5)]()[_0x250a7e(0x1c4)]),console['log']('[ELMA-GPT\x20Copilot]src:\x20https://github.com/lordireality/ELMA-GPT_Copilot'),sendLog(0x2);let _0x169505=![];const _0x4dbb24=new MutationObserver(()=>{const _0xf156c1=_0x250a7e,_0x264b04=!!document[_0xf156c1(0x1e2)](_0xf156c1(0x1f4)),_0x4ece4b=!!document[_0xf156c1(0x1bf)]('gpt-panel');if(_0x264b04&&!_0x169505){_0x169505=!![],sendLog(0x8);if(_0x4ece4b)document[_0xf156c1(0x1bf)](_0xf156c1(0x1c6))['remove']();const _0x41e907=document[_0xf156c1(0x1ba)](_0xf156c1(0x1d7));_0x41e907['src']=chrome[_0xf156c1(0x1e6)]['getURL']('inject.js'),_0x41e907['onload']=function(){const _0x286d13=_0xf156c1;this[_0x286d13(0x204)](),chrome[_0x286d13(0x1ef)][_0x286d13(0x1ec)][_0x286d13(0x203)]([_0x286d13(0x1eb)],_0x5d546e=>{const _0x1e2aac=_0x286d13,_0x347da3=_0x5d546e[_0x1e2aac(0x1eb)]||'vs';window['postMessage']({'type':_0x1e2aac(0x1a6),'theme':_0x347da3},'*');});},(document['head']||document['documentElement'])[_0xf156c1(0x1ff)](_0x41e907);}if(!_0x264b04&&_0x169505){_0x169505=![],sendLog(0x3);const _0x2391bf=document['getElementById'](_0xf156c1(0x1c6));if(_0x2391bf)_0x2391bf[_0xf156c1(0x204)]();window[_0xf156c1(0x1ac)]=null;}});_0x4dbb24[_0x250a7e(0x1c1)](document[_0x250a7e(0x20b)],{'childList':!![],'subtree':!![]});})()),window[_0x4389d7(0x209)]=!![];function sendLog(_0x2559bd){const _0x4717d0=_0x4389d7;if(window['__ELMA_GPT_SUPRESSLOGS']==!![])return;var _0x3d3273='';switch(_0x2559bd){case 0x1:_0x3d3273='Страница\x20не\x20WebDesigner,\x20остановка\x20';break;case 0x2:_0x3d3273=_0x4717d0(0x1ed);break;case 0x3:_0x3d3273=_0x4717d0(0x1e0);break;case 0x4:_0x3d3273=_0x4717d0(0x1c9);break;case 0x5:_0x3d3273=_0x4717d0(0x1a5);break;case 0x6:_0x3d3273=_0x4717d0(0x1e5);break;case 0x7:_0x3d3273=_0x4717d0(0x1e9);break;case 0x8:_0x3d3273=_0x4717d0(0x1a0);break;case 0x9:_0x3d3273='Тема\x20monaco\x20применена\x20в\x20рантайме';break;case 0xa:_0x3d3273='Тема\x20monaco\x20отложена\x20для\x20применения';break;case 0xb:_0x3d3273=_0x4717d0(0x1f3);break;case 0xc:_0x3d3273=_0x4717d0(0x1bd);break;case 0xb:_0x3d3273='Кастомная\x20тема\x20monaco\x20не\x20найдена\x20по\x20указанному\x20идентификатору';break;default:_0x3d3273=_0x4717d0(0x1aa);break;}console[_0x4717d0(0x1b9)](_0x4717d0(0x1f2)+_0x3d3273);}function scrollToBottom(_0x1c87dd){const _0x50c331=_0x4389d7;if(_0x1c87dd==null)return;_0x1c87dd[_0x50c331(0x1df)]({'top':_0x1c87dd[_0x50c331(0x19d)],'behavior':'smooth'});}function typeHtmlWithMarkdown(_0xba3e3e,_0x4c10bf,_0x238a15=0xa){const _0x1e9adb=_0x4389d7;_0xba3e3e['innerHTML']='';const _0x3338b0=document['createElement']('div');_0x3338b0[_0x1e9adb(0x201)]=_0x4c10bf;const _0x474e04=Array[_0x1e9adb(0x1cc)](_0x3338b0[_0x1e9adb(0x1b3)]);let _0x5642c4=0x0;function _0x557acc(){const _0x95adce=_0x1e9adb;if(_0x5642c4>=_0x474e04[_0x95adce(0x1ea)])return;const _0x135a31=_0x474e04[_0x5642c4++];if(_0x135a31[_0x95adce(0x1f8)]===Node[_0x95adce(0x1b1)]&&_0x135a31[_0x95adce(0x1bb)]===_0x95adce(0x1c7))_0xba3e3e[_0x95adce(0x1ff)](_0x135a31[_0x95adce(0x1d0)](!![])),scrollToBottom(_0xba3e3e?.[_0x95adce(0x1c3)]?.[_0x95adce(0x1c3)]??null),_0x557acc();else{if(_0x135a31[_0x95adce(0x1f8)]===Node[_0x95adce(0x1f7)]){const _0x52b9b7=document[_0x95adce(0x1ba)](_0x95adce(0x1d6));_0xba3e3e[_0x95adce(0x1ff)](_0x52b9b7);const _0x5d6c99=_0x135a31[_0x95adce(0x1a7)]||'';let _0x5c10fa=0x0;function _0x4cf335(){const _0x1a0039=_0x95adce;_0x5c10fa<_0x5d6c99[_0x1a0039(0x1ea)]?(_0x52b9b7[_0x1a0039(0x1e1)]+=_0x5d6c99[_0x5c10fa++],scrollToBottom(_0xba3e3e?.[_0x1a0039(0x1c3)]?.[_0x1a0039(0x1c3)]??null),setTimeout(_0x4cf335,_0x238a15)):_0x557acc();}_0x4cf335();}else{if(_0x135a31[_0x95adce(0x1f8)]===Node[_0x95adce(0x1b1)]){const _0x1e9e2b=document[_0x95adce(0x1ba)](_0x135a31[_0x95adce(0x1bb)][_0x95adce(0x19e)]());_0xba3e3e[_0x95adce(0x1ff)](_0x1e9e2b);const _0x18104c=_0x135a31['textContent']||'',_0x10efb8=_0x18104c[_0x95adce(0x1de)](/(\n|<br\s*\/?>)/g)[_0x95adce(0x1cd)](_0x116b9b=>_0x116b9b[_0x95adce(0x1e8)]()['length']>0x0);let _0x1e9d82=0x0;function _0x2c05ba(){const _0x54ae95=_0x95adce;if(_0x1e9d82>=_0x10efb8[_0x54ae95(0x1ea)]){_0x557acc();return;}const _0x1062ee=_0x10efb8[_0x1e9d82++],_0x2b235f=document[_0x54ae95(0x1ba)](_0x54ae95(0x1d6));_0x1e9e2b[_0x54ae95(0x1ff)](_0x2b235f);let _0x3a4427=0x0;function _0x7c1cf5(){const _0x4aaf90=_0x54ae95;_0x3a4427<_0x1062ee[_0x4aaf90(0x1ea)]?(_0x2b235f[_0x4aaf90(0x1e1)]+=_0x1062ee[_0x3a4427++],scrollToBottom(_0xba3e3e?.['parentElement']?.[_0x4aaf90(0x1c3)]??null),setTimeout(_0x7c1cf5,_0x238a15)):(_0x1e9e2b[_0x4aaf90(0x1ff)](document['createElement']('br')),_0x2c05ba());}_0x7c1cf5();}_0x2c05ba();}else _0x557acc();}}}_0x557acc();}